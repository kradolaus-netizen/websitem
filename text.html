<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sihirli SÃ¼rpriz - Dev Kalp & Parti</title>
    <style>
        :root {
            --pink: #ff4d6d;
            --dark-pink: #c9184a;
            --glass: rgba(255, 255, 255, 0.2);
            --bordo: #800020;
        }

        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #fff0f3;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            transition: background 1s ease;
        }

        /* --- SÄ°HÄ°RLÄ° FARE PARILTISI CSS --- */
        .sparkle {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            font-size: 20px;
            animation: sparkleAnim 1s linear forwards;
        }

        @keyframes sparkleAnim {
            0% { transform: scale(1) rotate(0deg); opacity: 1; }
            100% { transform: scale(0) rotate(180deg); opacity: 0; }
        }

        /* --- GERÄ° SAYIM STÄ°LÄ° --- */
        #countdown {
            margin-top: 20px;
            padding: 10px 20px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(255, 77, 109, 0.2);
            color: var(--dark-pink);
            font-weight: bold;
            z-index: 100;
            border: 2px solid var(--pink);
        }

        /* --- PARTÄ° MODU ARKA PLAN --- */
        body.party-mode { animation: discoBg 5s infinite linear; }
        @keyframes discoBg {
            0% { background: #ffafbd; }
            25% { background: #ffc3a0; }
            50% { background: #2193b0; }
            75% { background: #ee9ca7; }
            100% { background: #ffafbd; }
        }

        /* --- DÄ°SKO TOPLARI --- */
        .disco-ball {
            position: fixed; top: -150px; font-size: 80px; z-index: 100;
            transition: top 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            filter: drop-shadow(0 0 15px gold);
        }
        .disco-ball.active { top: 20px; animation: rotateBall 2s infinite linear; }
        #disco-left { left: 10vw; } #disco-right { right: 10vw; }
        @keyframes rotateBall { 0% { transform: rotate(-20deg); } 50% { transform: rotate(20deg); } 100% { transform: rotate(-20deg); } }

        /* --- SOKETLER --- */
        .socket {
            position: absolute; width: 50px; height: 60px;
            background: #3e2723; border: 3px solid #f1c40f;
            border-radius: 10px; display: flex; justify-content: center; align-items: center;
            box-shadow: inset 0 0 10px #000;
        }
        .socket::after { content: ''; width: 15px; height: 15px; background: #000; border-radius: 50%; position: absolute; top: 15px; }
        #socket-left-top { top: 40px; left: 5vw; transform: rotate(180deg); }

        /* --- ANAHTARLIK VE BUTON --- */
        .key-rack { margin-top: 15px; width: 90%; max-width: 480px; height: 110px; background: #5d4037; border-bottom: 8px solid #3e2723; border-radius: 12px; display: flex; justify-content: space-around; align-items: center; z-index: 1000; }
        .key-slot { position: relative; width: 70px; display: flex; justify-content: center; }
        .glass-case { width: 65px; height: 100px; background: var(--glass); backdrop-filter: blur(4px); border: 1px solid rgba(255,255,255,0.4); border-radius: 35px 35px 5px 5px; cursor: pointer; position: absolute; top: 5px; z-index: 1100; transition: all 0.8s; }
        .glass-fallen { top: 120vh !important; opacity: 0; }
        .key-icon { width: 55px; height: 55px; margin-top: 30px; cursor: pointer; transition: all 1s ease-in-out; z-index: 1050; }
        .disabled-key { filter: grayscale(1) opacity(0.3); cursor: not-allowed; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .shake { animation: shake 0.2s ease-in-out; }

        .party-btn { width: 70px; height: 70px; background: gold; border: 4px solid white; border-radius: 50%; font-size: 30px; cursor: pointer; display: flex; justify-content: center; align-items: center; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: 0.3s; }
        .party-btn.active { background: #7209b7; box-shadow: 0 0 20px #7209b7; }

        /* --- DEV KALP SAHNESÄ° --- */
        .stage { position: relative; width: 95vw; height: 60vh; max-width: 800px; margin-top: 10px; display: flex; justify-content: center; align-items: center; z-index: 10; }
        .heart-part { position: absolute; height: 400px; width: 230px; transition: transform 2s cubic-bezier(0.4, 0, 0.2, 1); z-index: 50; cursor: pointer; }
        .left-part { left: 50%; transform: translateX(-100%); transform-origin: left; }
        .right-part { right: 50%; transform: translateX(100%); transform-origin: right; }
        .beating-l { animation: heartPulseL 0.6s ease-in-out; }
        .beating-r { animation: heartPulseR 0.6s ease-in-out; }
        @keyframes heartPulseL { 0%, 100% { transform: scale(1) translateX(-100%); } 50% { transform: scale(1.05) translateX(-95%); } }
        @keyframes heartPulseR { 0%, 100% { transform: scale(1) translateX(100%); } 50% { transform: scale(1.05) translateX(95%); } }
        
        .is-open .left-part { transform: translateX(-145%) rotateY(-125deg) !important; }
        .is-open .right-part { transform: translateX(145%) rotateY(125deg) !important; }

        .lock-icon { position: absolute; width: 85px; height: 85px; z-index: 60; fill: #f1c40f; background: rgba(255,255,255,0.3); padding: 12px; border-radius: 50%; transition: 0.5s; top: 40%; }
        .is-open .lock-icon { opacity: 0; transform: scale(0); }

        /* --- MEKTUP MODAL --- */
        .letter-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.8); width: 85%; max-width: 420px; background: #fff; padding: 30px; border-radius: 15px; text-align: center; opacity: 0; pointer-events: none; transition: all 0.8s; z-index: 2000; max-height: 70vh; overflow-y: auto; box-shadow: 0 15px 40px rgba(0,0,0,0.3); }
        .letter-modal.show { opacity: 1; pointer-events: auto; transform: translate(-50%, -50%) scale(1); }
        .close-btn { margin-top: 20px; background: var(--pink); color: white; border: none; padding: 10px 25px; border-radius: 20px; cursor: pointer; font-weight: bold; }

        /* --- EFEKTLER --- */
        .love-note { position: fixed; color: var(--dark-pink); font-weight: bold; z-index: 2000; animation: floatUp 3s forwards; pointer-events: none; }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-300px); opacity: 0; } }
        .kiss-pile { position: fixed; font-size: 30px; z-index: -1; animation: fallToPile 3.5s forwards; }
        @keyframes fallToPile { from { top: -50px; } to { top: calc(100vh - 45px); } }
        .confetti { position: fixed; width: 12px; height: 12px; z-index: 100; animation: cFall 3s ease-in forwards; }
        @keyframes cFall { 0% { top: -20px; transform: rotate(0); } 100% { top: calc(100vh - 15px); transform: rotate(720deg); } }
        #broom-container { position: fixed; bottom: -20px; right: -300px; font-size: 110px; z-index: 2000; transition: right 3s linear; pointer-events: none; }

        /* Zarf Stilleri */
        .envelope-container { position: absolute; width: 350px; height: 220px; z-index: 15; top: 35%; display: none; }
        .envelope-back { position: absolute; width: 100%; height: 100%; background: var(--bordo); border-radius: 5px; z-index: 1; border: 2px solid #600018; }
        .letter-preview { position: absolute; bottom: 0; width: 90%; left: 5%; background: #fff; height: 140px; border: 1px solid #ddd; z-index: 2; transition: transform 1.2s cubic-bezier(0.17, 0.67, 0.83, 0.67); overflow-y: auto; padding: 10px; box-sizing: border-box;}
        .envelope-front { position: absolute; width: 100%; height: 60%; bottom: 0; background: var(--bordo); clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); z-index: 3; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px; }
        .envelope-flap { position: absolute; top: 0; width: 0; height: 0; border-left: 175px solid transparent; border-right: 175px solid transparent; border-top: 110px solid #900025; transform-origin: top; transition: transform 0.8s; z-index: 4; }
        .flap-open { transform: rotateX(180deg); }
        .letter-up { transform: translateY(-130px); }
    </style>
</head>

<body onmousemove="magicTrail(event)" ontouchmove="magicTrail(event)">

    <div id="countdown">HesaplanÄ±yor... â³</div>

    <div class="disco-ball" id="disco-left">ğŸª©</div>
    <div class="disco-ball" id="disco-right">ğŸª©</div>
    <div class="socket" id="socket-left-top"></div>

    <div class="key-rack">
        <div class="key-slot">
            <div class="glass-case" onclick="handleGlass(this)"></div>
            <svg class="key-icon disabled-key" id="key-left" viewBox="0 0 24 24" fill="#e67e22" onclick="useKey(this, 'left')"><path d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65z"/></svg>
        </div>
        <div class="key-slot">
            <div class="glass-case" onclick="handleGlass(this)"></div>
            <svg class="key-icon" id="key-mid" viewBox="0 0 24 24" fill="#f1c40f" onclick="useKey(this, 'mid')"><path d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65z"/></svg>
        </div>
        <button class="party-btn" id="party-toggle" onclick="toggleParty()">ğŸ¥³</button>
    </div>

    <div class="stage" id="stage" onclick="heartInteract()">
        <div class="envelope-container" id="env-container">
            <div class="envelope-back"></div>
            <div class="letter-preview" id="letter-prev">
                <h3>CanÄ±m Sevgilim â¤ï¸</h3>
                <p>Mektubun hazÄ±r...</p>
            </div>
            <div class="envelope-front"></div>
            <div class="envelope-flap" id="flap"></div>
        </div>
        <svg class="heart-part left-part" id="h-left" viewBox="0 0 100 160"><path d="M 100 160 C 20 130 0 90 0 50 C 0 20 40 0 70 0 C 85 0 100 10 100 30 L 100 160" fill="#ff4d6d"/></svg>
        <svg class="heart-part right-part" id="h-right" viewBox="0 0 100 160"><path d="M 0 160 C 80 130 100 90 100 50 C 100 20 60 0 30 0 C 15 0 0 10 0 30 L 0 160" fill="#ff4d6d"/></svg>
        <svg class="lock-icon" id="lock" viewBox="0 0 24 24"><path d="M12 2c-2.76 0-5 2.24-5 5v3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2v-3c0-2.76-2.24-5-5-5z"/></svg>
    </div>

    <div class="letter-modal" id="letter-modal">
        <h2 style="color: var(--dark-pink);">CanÄ±m Sevgilim, biricik Selmam, huzurum mutluluÄŸum HER ÅEYÄ°MM â¤ï¸</h2>
        <p>GÃ¶zlerimi kapattÄ±ÄŸÄ±mda gÃ¶rdÃ¼ÄŸÃ¼m tek ÅŸey sensin. Seninle geÃ§en her an, hayatÄ±mÄ±n en gÃ¼zel hediyesi. Ä°yi ki varsÄ±n, iyi ki doÄŸdun. Seninle tanÄ±ÅŸmak bana bu hayatÄ±n bahÅŸettiÄŸi en yÃ¼ce ÅŸeydi. Seni Ã§okkk ama Ã§okk seviyorum ve Ã¶mrÃ¼mÃ¼n sonuna kadar da seninle beraber olmak istiyorum. Ä°nÅŸallah beraber nice doÄŸum gÃ¼nleri nice yÄ±l dÃ¶nÃ¼mlerini beraber kutlayacaÄŸÄ±z. Ä°nÅŸallah yaptÄ±ÄŸÄ±m bu siteyi beÄŸenirsinnn. Sen Ã§ok gÃ¼zel ve Ã§ok Ã¶zelsin bunu hiÃ§ unutma. Seninle ilk tanÄ±ÅŸtÄ±ÄŸÄ±mÄ±zda ben sana Ã§ok aÅŸÄ±k oldum ve korktum. Ã‡Ã¼nkÃ¼ ben daha Ã¶nce hiÃ§ bÃ¶yle hissetmemiÅŸtim. Biraz soÄŸuktun diyebilirsin ama ben ne yaÄŸÄ±caÄŸÄ±mÄ± bilmiyordum. Åimdi bile bazen hani ne yapÄ±caÄŸÄ±mÄ± bilemiyorum elim ayaÄŸÄ±ma dolanÄ±yor senin bana karÅŸÄ± anlam veremediÄŸim bi kontrol gÃ¼cÃ¼n var ve ben buna bayÄ±lÄ±yorum. Ä°yi ki hayatÄ±mdasÄ±n iyi ki varsÄ±nn. Sen her ÅŸeyi yaparsÄ±nnnn sÄ±navÄ±nÄ± da parÃ§alÄ±caz zatennnn. seneyeki doÄŸum gÃ¼nÃ¼nÃ¼ yan yana kutlama dileÄŸiylee. GÃ¶rÃ¼ÅŸÃ¼rÃ¼zzzzzzz.</p>
        <strong>-Ethem</strong><br>
        <button class="close-btn" onclick="closeModal()">Mektubu Kapat âœ¨</button>
    </div>

    <audio id="bg-music" loop src="sarki.mp3"></audio>
    <div id="broom-container">ğŸ§¹</div>

    <script>
        // Åifre kontrolÃ¼
        const sifre = prompt("TanÄ±ÅŸma tarihimiz nedir (GG.AA.YYYY)");
        if (sifre !== "14.02.2025") {
            alert("Bu bÃ¶lgeye sadece benim biricik sevgilim girebilir derhal terk edin.");
            document.body.innerHTML = "<h1 style='color:red; text-align:center; margin-top:20%'>EriÅŸim Reddedildi.</h1>";
            window.stop(); 
        }

        const bdayDate = new Date("Feb  8, 2026 00:00:00").getTime();
        let heartUnlocked = false, partyActive = false, confettiLoop, heartClickCount = 0;

        // Geri SayÄ±m
        function updateCountdown() {
            const now = new Date().getTime();
            const diff = bdayDate - now;
            if (diff > 0) {
                const g = Math.floor(diff / 86400000), s = Math.floor((diff % 86400000) / 3600000), d = Math.floor((diff % 3600000) / 60000);
                document.getElementById("countdown").innerHTML = `DoÄŸum gÃ¼nÃ¼ne: ${g} gÃ¼n ${s}s ${d}dk kaldÄ± â¤ï¸`;
            } else { document.getElementById("countdown").innerHTML = "Ä°YÄ° KÄ° DOÄDUN BÄ°RÄ°CÄ°ÄÄ°M! ğŸ‚ğŸ‰"; }
        }
        setInterval(updateCountdown, 1000); updateCountdown();

        // Sihirli Fare Ä°zi
        function magicTrail(e) {
            const x = e.clientX || (e.touches ? e.touches[0].clientX : 0);
            const y = e.clientY || (e.touches ? e.touches[0].clientY : 0);
            if (!x || !y) return;
            const el = document.createElement('div');
            el.className = 'sparkle'; el.innerHTML = 'âœ¨';
            el.style.left = (x - 10) + 'px'; el.style.top = (y - 10) + 'px';
            const colors = ["#ff4d6d", "#f1c40f", "#ffffff", "#ffb3c1"];
            el.style.color = colors[Math.floor(Math.random() * colors.length)];
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 1000);
        }

        const messages = ["Bu kalp seninle atÄ±yorâ¤ï¸", "en deÄŸerli elmasÄ±m sensin ğŸ’", "Seni her ÅŸeyden Ã§ok seviyorum! ğŸ˜", "8 Åubat'Ä± bekliyorum â³"];

        function toggleParty() {
            partyActive = !partyActive;
            const btn = document.getElementById('party-toggle'), music = document.getElementById('bg-music');
            document.body.classList.toggle('party-mode');
            document.getElementById('disco-left').classList.toggle('active');
            document.getElementById('disco-right').classList.toggle('active');
            btn.classList.toggle('active');
            if (partyActive) {
                music.play().catch(() => {});
                confettiLoop = setInterval(() => createElement('confetti', ''), 150);
            } else {
                music.pause();
                clearInterval(confettiLoop);
                cleanUpConfetti();
            }
        }

        function heartInteract() {
            if (heartUnlocked) return;
            heartClickCount++;
            const hl = document.getElementById('h-left'), hr = document.getElementById('h-right');
            hl.classList.add('beating-l'); hr.classList.add('beating-r');
            setTimeout(() => { hl.classList.remove('beating-l'); hr.classList.remove('beating-r'); }, 600);

            const msg = messages[Math.floor(Math.random() * messages.length)];
            const note = document.createElement('div');
            note.className = 'love-note'; note.innerHTML = msg;
            note.style.left = (Math.random() * 60 + 20) + "vw"; note.style.top = "50vh";
            document.body.appendChild(note);
            setTimeout(() => note.remove(), 3000);

            if (heartClickCount % 5 === 0) triggerEmojiRain();
        }

        function triggerEmojiRain() {
            const emojis = ["â¤ï¸", "ğŸ’–", "âœ¨", "ğŸ¥°", "ğŸŒ¸", "ğŸŒ¹", "ğŸ’‹"];
            for (let i = 0; i < 20; i++) {
                setTimeout(() => createElement('kiss-pile', emojis[Math.floor(Math.random() * emojis.length)]), i * 50);
            }
        }

        setInterval(() => { if(heartUnlocked) createElement('kiss-pile', 'ğŸ˜˜'); }, 300);

        function handleGlass(el) {
            if (new Date().getTime() >= bdayDate) el.classList.add('glass-fallen');
            else { alert("8 Åubat'Ä± beklemelisin! â¤ï¸"); el.classList.add('shake'); setTimeout(() => el.classList.remove('shake'), 200); }
        }

        function useKey(keyEl, type) {
            const glass = keyEl.parentElement.querySelector('.glass-case');
            if (!glass.classList.contains('glass-fallen') || keyEl.classList.contains('disabled-key')) return;
            const rectS = (type === 'mid') ? document.getElementById('lock').getBoundingClientRect() : 
                            document.getElementById('socket-left-top').getBoundingClientRect();
            const rectK = keyEl.getBoundingClientRect();
            if (type === 'mid') {
                keyEl.style.position = "fixed"; keyEl.style.left = rectK.left + "px"; keyEl.style.top = rectK.top + "px";
                setTimeout(() => {
                    keyEl.style.transform = `translate(${rectS.left - rectK.left}px, ${rectS.top - rectK.top}px) rotate(90deg) scale(1.6)`;
                    setTimeout(() => { keyEl.style.opacity = "0"; unlockHeart(); }, 1000);
                }, 50);
            } else if (type === 'left') {
                keyEl.style.transform = `translate(${rectS.left - rectK.left}px, ${rectS.top - rectK.top}px) rotate(180deg)`;
                setTimeout(() => location.reload(), 1100);
            }
        }

        function unlockHeart() {
            document.getElementById('stage').classList.add('is-open');
            heartUnlocked = true;
            document.getElementById('key-left').classList.remove('disabled-key');
            let startConfetti = setInterval(() => createElement('confetti', ''), 100);
            setTimeout(() => { clearInterval(startConfetti); cleanUpConfetti(); }, 2000);
            setTimeout(() => {
                document.getElementById('env-container').style.display = "block";
                setTimeout(() => {
                    document.getElementById('flap').classList.add('flap-open');
                    setTimeout(() => document.getElementById('letter-prev').classList.add('letter-up'), 800);
                }, 500);
            }, 1200);
            setTimeout(() => document.getElementById('letter-modal').classList.add('show'), 5500);
        }

        function closeModal() { document.getElementById('letter-modal').classList.remove('show'); }

        function createElement(type, content) {
            const el = document.createElement('div');
            el.className = type; el.innerHTML = content;
            el.style.left = Math.random() * 100 + "vw";
            if(type === 'confetti') el.style.background = ["#ff4d6d", "#7209b7", "#ffb3c1", "#f1c40f"][Math.floor(Math.random()*4)];
            document.body.appendChild(el);
            if(type === 'kiss-pile') setTimeout(() => el.remove(), 4000);
        }

        function cleanUpConfetti() {
            const broom = document.getElementById('broom-container');
            broom.style.right = "130vw";
            setTimeout(() => {
                document.querySelectorAll('.confetti').forEach(c => c.style.opacity = "0");
                setTimeout(() => {
                    document.querySelectorAll('.confetti').forEach(c => c.remove());
                    broom.style.right = "-300px";
                }, 1000);
            }, 1500);
        }
    </script>
</body>
</html>